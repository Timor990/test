{"ast":null,"code":"export default {\n  name: 'Captcha',\n  props() {},\n  data() {\n    return {\n      captchaText: '',\n      isClicked: false\n    };\n  },\n  mounted() {\n    this.generateCaptcha();\n  },\n  methods: {\n    generateCaptcha() {\n      console.log(isClicked);\n      this.isClicked = true;\n      console.log(isClicked);\n      const canvas = this.$refs.captchaCanvas;\n      const ctx = canvas.getContext('2d');\n      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      this.captchaText = '';\n\n      // 生成随机验证码\n      for (let i = 0; i < 6; i++) {\n        this.captchaText += chars.charAt(Math.floor(Math.random() * chars.length));\n      }\n\n      // 清空画布\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // 设置背景色\n      ctx.fillStyle = '#f0f0f0';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      console.log(canvas.width);\n      console.log(canvas.height);\n      // 添加一些干扰线\n      for (let i = 0; i < 5; i++) {\n        ctx.strokeStyle = this.getRandomColor();\n        ctx.beginPath();\n        let tempWidth = Math.random() * canvas.width;\n        let tempHeigt = Math.random() * canvas.height;\n        console.log(tempWidth);\n        console.log(tempHeigt);\n        ctx.moveTo(tempWidth, tempHeigt);\n        ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);\n        ctx.stroke();\n      }\n      console.log(this.captchaText);\n      // 绘制验证码字符\n      for (let i = 0; i < this.captchaText.length; i++) {\n        ctx.font = `${this.getRandomFontSize()}px Arial`;\n        ctx.fillStyle = this.getRandomColor();\n        ctx.save();\n\n        // 随机旋转字符\n        ctx.translate(30 * i + 20, canvas.height / 2 + Math.random() * 10 - 5);\n        ctx.rotate((Math.random() - 0.5) * Math.PI / 6); // 随机旋转 -30° 到 30°\n        ctx.fillText(this.captchaText[i], 0, 0);\n        ctx.restore();\n      }\n    },\n    getRandomColor() {\n      const letters = '0123456789ABCDEF';\n      let color = '#';\n      for (let i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n      }\n      return color;\n    },\n    getRandomFontSize() {\n      return Math.floor(Math.random() * 10) + 20; // 随机字体大小 20px 到 30px\n    }\n  }\n};","map":{"version":3,"names":["name","props","data","captchaText","isClicked","mounted","generateCaptcha","methods","console","log","canvas","$refs","captchaCanvas","ctx","getContext","chars","i","charAt","Math","floor","random","length","clearRect","width","height","fillStyle","fillRect","strokeStyle","getRandomColor","beginPath","tempWidth","tempHeigt","moveTo","lineTo","stroke","font","getRandomFontSize","save","translate","rotate","PI","fillText","restore","letters","color"],"sources":["E:\\停车公司项目\\3.信息部工作\\webApp\\webapp\\src\\views\\login\\components\\captcha.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <canvas ref=\"captchaCanvas\" width=\"200\" height=\"80\"></canvas>\r\n    </div>\r\n    <div>\r\n      <text @click=\"generateCaptcha\" :class=\"[isClicked?'text1':'text2']\" >刷新验证码</text>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default{\r\n  name:'Captcha',\r\n  props(){\r\n\r\n\r\n  },\r\n  data(){\r\n    return {\r\n      captchaText:'',\r\n      isClicked:false\r\n    }\r\n  },\r\n  mounted(){\r\n    this.generateCaptcha();\r\n  },\r\n  methods:{\r\n    generateCaptcha() {\r\n      console.log(isClicked)\r\n\r\n      this.isClicked=true;\r\n      console.log(isClicked)\r\n      const canvas = this.$refs.captchaCanvas;\r\n      const ctx = canvas.getContext('2d');\r\n      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n      this.captchaText = '';\r\n      \r\n      // 生成随机验证码\r\n      for (let i = 0; i < 6; i++) {\r\n        this.captchaText += chars.charAt(Math.floor(Math.random() * chars.length));\r\n      }\r\n\r\n      // 清空画布\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      // 设置背景色\r\n      ctx.fillStyle = '#f0f0f0';\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      console.log(canvas.width)\r\n      console.log(canvas.height)\r\n      // 添加一些干扰线\r\n      for (let i = 0; i < 5; i++) {\r\n        ctx.strokeStyle = this.getRandomColor();\r\n        ctx.beginPath();\r\n        let tempWidth=Math.random() * canvas.width;\r\n        let tempHeigt=Math.random() * canvas.height\r\n        console.log(tempWidth)\r\n        console.log(tempHeigt)\r\n        ctx.moveTo(tempWidth,tempHeigt );\r\n        ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);\r\n        ctx.stroke();\r\n      }\r\n      console.log(this.captchaText)\r\n      // 绘制验证码字符\r\n      for (let i = 0; i < this.captchaText.length; i++) {\r\n        ctx.font = `${this.getRandomFontSize()}px Arial`;\r\n        ctx.fillStyle = this.getRandomColor();\r\n        ctx.save();\r\n        \r\n        // 随机旋转字符\r\n        ctx.translate(30 * i + 20, canvas.height / 2 + Math.random() * 10 - 5);\r\n        ctx.rotate((Math.random() - 0.5) * Math.PI / 6); // 随机旋转 -30° 到 30°\r\n        ctx.fillText(this.captchaText[i], 0, 0);\r\n        ctx.restore();\r\n      }\r\n    },\r\n    getRandomColor() {\r\n      const letters = '0123456789ABCDEF';\r\n      let color = '#';\r\n      for (let i = 0; i < 6; i++) {\r\n        color += letters[Math.floor(Math.random() * 16)];\r\n      }\r\n      return color;\r\n    },\r\n    getRandomFontSize() {\r\n      return Math.floor(Math.random() * 10) + 20; // 随机字体大小 20px 到 30px\r\n    }\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.text1{\r\n  text-decoration: underline;\r\n  cursor:pointer ;\r\n  color:blue;\r\n}\r\n.text2{\r\n  text-decoration: underline;\r\n  cursor:pointer ;\r\n  color:purple\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}